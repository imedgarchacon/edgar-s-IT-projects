<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Visor 3D — Constructora Chacón</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/remixicon@4.3.0/fonts/remixicon.css" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
  <script type="module">
    import { initializeApp, getApps, getApp } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged, updateProfile } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-auth.js";
    const firebaseConfig = { apiKey: "AIzaSyAn-DHOCtzdd1Uheo_AJQ0vjZh3Rt3G_r8", authDomain: "constructora-ch.firebaseapp.com", projectId: "constructora-ch", storageBucket: "constructora-ch.firebasestorage.app", messagingSenderId: "359610922559", appId: "1:359610922559:web:ac83f5e9407bf758a92a8a" };
    const app = getApps().length ? getApp() : initializeApp(firebaseConfig);
    const auth = getAuth(app);
    window.auth = auth;
    window.createUserWithEmailAndPassword = createUserWithEmailAndPassword;
    window.signInWithEmailAndPassword = signInWithEmailAndPassword;
    window.signOut = signOut;
    window.onAuthStateChanged = onAuthStateChanged;
    window.updateProfile = updateProfile;
  </script>
  <style>
    .viewer{padding:32px 0;margin-top:90px}
    model-viewer{width:100%;height:70vh;border-radius:16px;border:2px solid rgba(0,40,85,.12);box-shadow:var(--shadow)}
  </style>
</head>
<body>
  <header class="header">
    <div class="container header__inner">
      <a href="index.html#inicio" class="brand">
        <img src="assets/logoCH.png" alt="Constructora Chacón" class="brand__logo" />
      </a>
      <nav class="nav" aria-label="Principal">
        <button class="nav__toggle" aria-label="Abrir menú"><i class="ri-menu-line"></i></button>
        <ul class="nav__list">
          <li><a href="index.html#inicio">Inicio</a></li>
          <li><a href="presupuesto.html">Presupuesto</a></li>
          <li><a href="trabaja.html">Trabaja con nosotros</a></li>
          <li><a href="index.html#contacto">Contacto</a></li>
        </ul>
      </nav>
      <div class="header__actions">
        <div class="auth__buttons" id="authButtons">
          <button class="btn btn--primary" id="loginBtn">Iniciar Sesión</button>
          <button class="btn btn--accent" id="registerBtn">Registrarse</button>
        </div>
        <div class="user__menu" id="userMenu" style="display: none;">
          <a href="dashboard.html" class="profile-chip" id="profileButton">
            <span class="profile-chip__avatar" id="profileAvatar">CC</span>
            <span class="profile-chip__name" id="profileName">Mi perfil</span>
          </a>
          <button class="btn btn--ghost" id="logoutBtn">Cerrar Sesión</button>
        </div>
      </div>
    </div>
  </header>

  <main class="viewer">
    <div class="container">
      <h1>Visor 3D del proyecto</h1>
      <p>Explora el modelo 3D del proyecto. Para realidad aumentada, abre desde tu móvil.</p>
      <model-viewer src="https://modelviewer.dev/shared-assets/models/Astronaut.glb" ar ar-modes="webxr scene-viewer quick-look" camera-controls tone-mapping="neutral" exposure="0.8" environment-image="neutral" shadow-intensity="1" auto-rotate alt="Modelo 3D del proyecto"></model-viewer>
      <p class="small" style="margin-top:8px">Ejemplo de modelo. Sustituye por tu GLB/GLTF al tenerlo disponible.</p>
    </div>
  </main>

  <script src="comp.js"></script>
  <script src="auth.js"></script>

  <div class="modal" id="loginModal">
    <div class="modal__content">
      <div class="modal__header">
        <h2>Iniciar Sesión</h2>
        <button class="modal__close" id="closeLoginModal"><i class="ri-close-line"></i></button>
      </div>
      <form class="auth__form" id="loginForm">
        <div class="form__group">
          <label for="loginEmail">Correo Electrónico</label>
          <input type="email" id="loginEmail" required>
        </div>
        <div class="form__group">
          <label for="loginPassword">Contraseña</label>
          <input type="password" id="loginPassword" required>
        </div>
        <button type="submit" class="btn btn--accent">Iniciar Sesión</button>
        <p class="auth__switch">¿No tienes cuenta? <a href="#" id="showRegister">Regístrate aquí</a></p>
      </form>
    </div>
  </div>

  <div class="modal" id="registerModal">
    <div class="modal__content">
      <div class="modal__header">
        <h2>Registrarse</h2>
        <button class="modal__close" id="closeRegisterModal"><i class="ri-close-line"></i></button>
      </div>
      <form class="auth__form" id="registerForm">
        <div class="form__group">
          <label for="registerName">Nombre completo</label>
          <input type="text" id="registerName" required>
        </div>
        <div class="form__group">
          <label for="registerRole">Tipo de usuario</label>
          <select id="registerRole" required>
            <option value="cliente">Cliente</option>
            <option value="trabajador">Trabajador</option>
          </select>
        </div>
        <div class="form__group">
          <label for="registerEmail">Correo Electrónico</label>
          <input type="email" id="registerEmail" required>
        </div>
        <div class="form__group">
          <label for="registerPassword">Contraseña</label>
          <input type="password" id="registerPassword" required minlength="6">
        </div>
        <div class="form__group">
          <label for="confirmPassword">Confirmar Contraseña</label>
          <input type="password" id="confirmPassword" required>
        </div>
        <button type="submit" class="btn btn--accent">Registrarse</button>
        <p class="auth__switch">¿Ya tienes cuenta? <a href="#" id="showLogin">Inicia sesión aquí</a></p>
      </form>
    </div>
  </div>
</body>
</html>


